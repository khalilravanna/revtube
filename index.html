<!doctype html>
<head>
  <title>PartyTube</title>
  <meta name="description" content="PartyTube">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/styles.css">
  <script src="vendor/react/react.js"></script>
  <script src="vendor/react/react-dom.js"></script>
    <!-- React components -->
  <script type="text/babel" src="src/add-videos-component.js"></script>
  <script type="text/babel" src="src/playlist-component.js"></script>
  <script type="text/babel" src="src/slide-container-component.js"></script>
  <!-- Main React entry point -->
  <script type="text/babel" src="src/main.js"></script>

</head>

<body>
  <div class="site-wrapper" id="video-container">
    <div id="main"></div>
    <div id="join-container">
      <h3>Join and add</h3>
      <div id="qrcode"></div>
    </div>
  </div>

  <script src="vendor/eventemitter2.js"></script>
  <script type="text/javascript">
    var events = new window.EventEmitter2();
  </script>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="vendor/lodash.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script src="http://www.parsecdn.com/js/parse-latest.js"></script>
  <script src="scripts/qrcode.min.js"></script>
  <script src="vendor/browser.min.js"></script>
  <script src="scripts/jquery.tubular.1.0.js"></script>
  <script type="text/javascript">
    events.on('youtube-api-ready', function () {
      window.youtubeApiReady = true;
    });

    // COPIED FROM: https://github.com/youtube/api-samples/blob/master/javascript/auth.js

    // The client ID is obtained from the {{ Google Cloud Console }}
    // at {{ https://cloud.google.com/console }}.
    // If you run this code from a server other than http://localhost,
    // you need to register your own client ID.
    var OAUTH2_CLIENT_ID = '431468126283-r5o8ji62abhasa4idot4qf8gv4hjp8pi.apps.googleusercontent.com';
    var OAUTH2_SCOPES = [
      'https://www.googleapis.com/auth/youtube'
    ];

    // Upon loading, the Google APIs JS client automatically invokes this callback.
    googleApiClientReady = function() {
      gapi.auth.init(function() {
        window.setTimeout(checkAuth, 1);
      });
    }

    // Attempt the immediate OAuth 2.0 client flow as soon as the page loads.
    // If the currently logged-in Google Account has previously authorized
    // the client specified as the OAUTH2_CLIENT_ID, then the authorization
    // succeeds with no user intervention. Otherwise, it fails and the
    // user interface that prompts for authorization needs to display.
    function checkAuth() {
      gapi.auth.authorize({
        client_id: OAUTH2_CLIENT_ID,
        scope: OAUTH2_SCOPES,
        immediate: true
      }, handleAuthResult);
    }

    // Handle the result of a gapi.auth.authorize() call.
    function handleAuthResult(authResult) {
      if (authResult && !authResult.error) {
        console.log('you good')
        loadAPIClientInterfaces();
      } else {
        console.log('gotta log in bro');
        gapi.auth.authorize({
        client_id: OAUTH2_CLIENT_ID,
        scope: OAUTH2_SCOPES,
        immediate: false
        }, handleAuthResult);
      }
    }

    // Load the client interfaces for the YouTube Analytics and Data APIs, which
    // are required to use the Google APIs JS client. More info is available at
    // https://developers.google.com/api-client-library/javascript/dev/dev_jscript#loading-the-client-library-and-the-api
    function loadAPIClientInterfaces() {
      gapi.client.load('youtube', 'v3', function() {
        events.emit('youtube-api-ready');
      });
    }
  </script>
  <script type="text/javascript" src="https://apis.google.com/js/client.js?onload=googleApiClientReady"></script>



  <script type="text/javascript">
      Parse.initialize('EmxeEeMgQxwUeC42hDPXfHK0tnKoTcLSL5OeZsuy', 'p8cryLkuriL0mTlWCmiKMmy0zRbYeMhGJ5YQFG6k');

      var qrcode = new QRCode("qrcode", {
          text: "http://jindo.dev.naver.com/collie",
          width: 130,
          height: 130,
          colorDark : "#000000",
          colorLight : "#ffffff",
          correctLevel : QRCode.CorrectLevel.H
      });

      var tubular = $('#video-container').tubular({
        videoId: 'ZYw3exBXb4c',
        mute: true,
        repeat: true,
        // volumeUpClass: 'tubular-volume-up',
        // volumeDownClass: 'tubular-volume-down',
        // playButtonClass: 'tubular-play',
        // pauseButtonClass: 'tubular-pause'
      });

      $(window).keypress(function(e) {
        if (e.keyCode === 0 || e.keyCode === 32) {
          window.player.pauseVideo();
        }
      });

  </script>
</body>

</html>
