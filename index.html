<!doctype html>
<head>
  <title>PartyTube</title>
  <meta name="description" content="PartyTube">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/styles.css">
  <script src="vendor/react/react.js"></script>
  <script src="vendor/react/react-dom.js"></script>
    <!-- React components -->
  <script type="text/babel" src="src/playlist-component.js"></script>
  <script type="text/babel" src="src/slide-container-component.js"></script>
  <!-- Main React entry point -->
  <script type="text/babel" src="src/main.js"></script>

</head>

<body>
  <div class="site-wrapper" id="video-container">
    <span id="title"></span>
    <span id="author"></span>
    <div id="main"></div>
    <div id="join-container">
      <h3>Join and add</h3>
      <div id="qrcode"></div>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script src="http://www.parsecdn.com/js/parse-latest.js"></script>
  <script src="scripts/qrcode.min.js"></script>
  <script src="vendor/browser.min.js"></script>
  <script src="scripts/jquery.tubular.1.0.js"></script>



  <script type="text/javascript">
      Parse.initialize('EmxeEeMgQxwUeC42hDPXfHK0tnKoTcLSL5OeZsuy', 'p8cryLkuriL0mTlWCmiKMmy0zRbYeMhGJ5YQFG6k');

      var qrcode = new QRCode("qrcode", {
          text: "http://localhost:9000/",
          width: 130,
          height: 130,
          colorDark : "#000000",
          colorLight : "#ffffff",
          correctLevel : QRCode.CorrectLevel.H
      });

      function showVideoInfo(){
        var title = window.player.B.videoData.title;
        var author = window.player.B.videoData.author;
        $("#title").text(title);
        $("#author").text(author);
      }

      function initPlayer(videoId) {
        $('#video-container').tubular({
          videoId: videoId,
          mute: true,
          repeat: true
        });

        var oldOnPlayerReady = window.onPlayerReady;

        window.onPlayerReady = function(e) {
          oldOnPlayerReady(e);

          $(window).keypress(function(e) {
            if (e.keyCode === 0 || e.keyCode === 32) {
              if (window.player.B.playerState == 1)
                window.player.pauseVideo();
              else if (window.player.B.playerState == 2)
                window.player.playVideo();
            }
          });

        }

        var oldOnPlayerStateChange = window.onPlayerStateChange;

        window.onPlayerStateChange = function (event) {
          oldOnPlayerStateChange(event);
          showVideoInfo();
        }
      }

      window.playNext = function(videoId) {
        if (window.player === undefined)
          initPlayer(videoId);
        else
          window.player.loadVideoById(videoId);
      }

      window.playNext('ZYw3exBXb4c');

  </script>
</body>

</html>
